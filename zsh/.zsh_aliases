#!/usr/bin/env zsh
# vim: awa:sts=4:ts=4:sw=4:et:cin:fdm=manual:tw=120:ft=zsh

###
# Aliases for zsh
###

# start by sourcing the needed zsh functions
[ -e "$HOME/.zsh_functions" ] && source "$HOME/.zsh_functions"

# Aliases to open configure files
alias zshrc='$EDITOR $HOME/.zshrc'
alias ohmyzsh='$EDITOR $HOME/.oh-my-zsh'
alias settings='$EDITOR $HOME/settings/.bash_settings'
alias zsettings='$EDITOR $HOME/settings/.zshrc'
alias setting-dir='cd $HOME/settings'

# Aliases for network/system/date/time information
alias mount='mount | column -t'
alias now='date +"%T"'
alias nowtime=now
alias nowdate='date +"%d-%m-%Y"'
alias ping='ping -c 3'
alias pingfast='ping -c 10 -i .1'
alias netiface=get-active-network-interface

if [[ "$(uname)" == "Darwin" ]] then
    alias ports='lsof -nP +c 15 | egrep "IPv[46]"'
else
    alias ports='netstat -tulanp'
fi
alias disks='df --total --human-readable'
alias dirsize=get-dirsize

# Additional information
alias hex='hexdump -v -C'
alias file-count='/bin/ls -1 | wc -l'
alias weather=get-full-weather-info
alias netinfo=get-network-info
alias -g XML='tidy -xml -q -i - | bat'
alias -g UUID=uuid-generator


# Aliases to make the standard commands a little more stupid proof
alias rm='rm -Iv --preserve-root'
# make sure you know what you are doing
alias mv='mv -iv'
alias cp='cp -iv'
alias ln='ln -iv'
# again, don't be stupid!
alias chown='chown --preserve-root'
alias chmod='chmod --preserve-root'
alias chgrp='chgrp --preserve-root'
# make it easy to add a path to the $PATH
alias update-path='export PATH=`pwd`:$PATH'
# make it simple to find the full path of any file/symlink/dir/etc.
alias abs_path=abs-path
# these args are impossible to remember
alias 7zenc='7z a -t7z -m0=lzma2 -mx=9 -mfb=64 -md=32m -ms=on -mhe=on -p'
alias 7ztest='7z l -slt'
alias 7zdec='7z x'

# Both of the following are keystroke savers...
alias cls='clear && echo -en "\e[3J"'
alias x='exit'

# Package mantanaince applications and commands
if [[ "$(uname)" == "Linux" ]] then
    alias update='sudo apt update'
    alias upgrade='sudo apt dist-upgrade'
else
    alias update='brew update && brew outdated && brew cask outdated'
    alias upgrade='brew upgrade && brew cask reinstall $(brew cask outdated) && brew cleanup'
fi

# Aliases for various applications
#alias ide='vim -O3'
#alias cpwp='rsync -aP'
#alias mvwp='rsync -aP --remove-source-files'
#alias pylint='pylint -r n --rcfile=$HOME/pylintrc'
#alias matrix='cmatrix -bs -C red'
#alias transmission-cli='transmission-remote-cli --config=$HOME/.config/transmission-remote-cli/settings.cfg'
#alias rickquote='fortune softwareengineering | cowsay -f rick-and-morty | lolcat'
#alias twopanes='itermocil --here two_panes'


# If on macOS the best markdown editor/viewer found is typora. Unfortunately they don't have any CLI support.
#  This alias enables both a 'typora' command (which nobody will ever remember) and a 'markdown' command
if [[ "$(uname)" == "Darwin" ]] then
    alias typora='open -a typora'
    alias mark-down='open -a typora'
    alias eject='diskutil unmountDisk force'
fi

# teletype is a function defined in .zsh_functions
if [[ $(command -v exa) ]] then
    alias  ls='exa --all --long --header --group --links --sort=Name --time-style=default --git --icons --color=always'
    alias  la='exa --all --long --header --group --links --sort=Name --time-style=default --git --icons --color=always'
    alias   l='exa --all --all --long --header --group --links --sort=Name --time-style=default --git --icons --color=always'
    alias  ll='exa --all --all --long --header --group --links --sort=Name --time-style=default --git --icons --color=always'
    alias lsa='exa --all --all --long --header --group --links --sort=Name --time-style=default --git --icons --color=always'
    alias dir='exa --all --long --header --group --links --sort=.Name --time-style=default --git --icons --color=always'
    alias lst='exa --all --long --header --group --links --sort=oldest --time-style=default --git --icons --color=always'
elif [[ $(command -v lsd) ]] then
    alias  ls='lsd --almost-all --long --color always'
    alias  la='lsd --almost-all --long --color always'
    alias   l='lsd --all --long --color always'
    alias  ll='lsd --all --long --color always'
    alias lsa='lsd --all --long --color always'
    alias dir='lsd --almost-all --long --color always'
    alias lst='lsd --almost-all --long --timesort --color always'
elif [[ $(command -v gls) ]] then
    # On Mac OSX our last chance of getting into the else loop is if the coreutils brew package has been installed
    #  and we can use the gnu-ls binary.
    alias  ls='gls --almost-all -l --classify --human-readable --color=always'
    alias  la='gls --almost-all -l --classify --human-readable --color=always'
    alias   l='gls --all -l --classify --human-readable --color=always'
    alias  ll='gls --all -l --classify --human-readable --color=always'
    alias lsa='gls --all -l --classify --human-readable --color=always'
    alias dir='gls --almost-all -l --classify --human-readable --color=always'
    alias lst='gls --almost-all -l --classify --human-readable --color=always -t'
else
    if [[ "$(uname)" == "Darwin" && ! $(/bin/ls --help > /dev/null 2>&1) ]] then
        # On Mac OSX the ls included only takes short options and will not allow help -- pile of garbage
        alias  ls='CLICOLOR_FORCE=1 CLICOLOR=1 /bin/ls -AliFGh'
        alias  la='CLICOLOR_FORCE=1 CLICOLOR=1 /bin/ls -AlFGh'
        alias   l='CLICOLOR_FORCE=1 CLICOLOR=1 /bin/ls -alFGh'
        alias  ll='CLICOLOR_FORCE=1 CLICOLOR=1 /bin/ls -alFGh'
        alias lsa='CLICOLOR_FORCE=1 CLICOLOR=1 /bin/ls -alFGh'
        alias dir='CLICOLOR_FORCE=1 CLICOLOR=1 /bin/ls -AlFGh'
        alias lst='CLICOLOR_FORCE=1 CLICOLOR=1 /bin/ls -AlFGht'
    else
        alias  ls='/bin/ls --almost-all -l --classify --human-readable --color=always'
        alias  la='/bin/ls --almost-all -l --classify --human-readable --color=always'
        alias   l='/bin/ls --all -l --classify --human-readable --color=always'
        alias  ll='/bin/ls -l --classify --human-readable --color=always'
        alias lsa='/bin/ls --all -l --classify --human-readable --color=always'
        alias dir='/bin/ls --almost-all -l --classify --human-readable --color=always'
        alias lst='/bin/ls --almost-all -l --classify --human-readable --color=always -t'
    fi
fi

# lastly, source the zsh_sources which contains 3rd party module includes
[ -e "$HOME/.zsh_sources" ] && source "$HOME/.zsh_sources"

set-tab-color
get-login-info

# This ensures that duplicate paths are not persisted to the PATH environment
#  variable regaurdless of how many times source .zshrc is executed
typeset -U PATH
# Shouldn't have to keep track of NIX paths but... oh well!
typeset -U NIX_PATH
typeset -U NIX_PROFILES
